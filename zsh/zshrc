# Uncomment this and comment at bottom to profile zsh load time
# zmodload zsh/zprof

# Download Znap, if it's not there yet.
[[ -f ~/dotfiles/zsh/snap/zsh-snap/znap.zsh ]] ||
    git clone --depth 1 -- \
        https://github.com/marlonrichert/zsh-snap.git ~/dotfiles/zsh/snap/zsh-snap

source ~/dotfiles/zsh/snap/zsh-snap/znap.zsh

znap prompt denysdovhan/spaceship-prompt

znap source Aloxaf/fzf-tab
znap source zsh-users/zsh-autosuggestions
znap source mafredri/zsh-async
znap source seletskiy/zsh-fuzzy-search-and-edit
znap source MenkeTechnologies/zsh-expand
znap source jandamm/instant-repl.zsh
znap source mfaerevaag/wd
znap source Valiev/almostontop

### Prompt
source ~/dotfiles/zsh/spaceship.zsh

## Zsh Core Settings
bindkey -v

# Its really annoying when zsh tries to match * for files
setopt +o nomatch

### History settings
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt HIST_IGNORE_ALL_DUPS  # do not put duplicated command into history list
setopt HIST_SAVE_NO_DUPS  # do not save duplicated command
setopt HIST_REDUCE_BLANKS  # remove unnecessary blanks
setopt INC_APPEND_HISTORY_TIME  # append command to history file immediately after execution
setopt EXTENDED_HISTORY  # record command start time

# Keybinding to edit command line
autoload -z edit-command-line 
zle -N edit-command-line
bindkey "^v" edit-command-line

source ~/.bash_aliases

bindkey '^ ' autosuggest-execute

### Configure ZSH
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="bg=bold,underline"
ZSH_AUTOSUGGEST_USE_ASYNC=true

bindkey '^P' fuzzy-search-and-edit

bindkey '^O' repl-set

eval "$(zoxide init zsh)"

export BAT_THEME="ansi-light"

source ~/dotfiles/zsh/scripts/*

# zprof
